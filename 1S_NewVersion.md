Отличия версии 3.0 от предыдущих версий 
=======================================

Новые возможности
В версии 3.0 в компоненте появились следующие новые возможности:

-   Асинхронное выполнение длительных операций.
    При выполнении операций, которые занимают длительное время
    (получение списка документов), а также операций, которые необходимо
    выполнять многократно (отправка документов), целесообразно
    "распараллеливать" эти операции, с тем чтобы одновременно
    выполнялось несколько запросов на сервер.

    Для реализации этой возможности создан класс
    [AsyncResult](1S_AsyncResult_Desc), который уеет "сообщать" системе
    о том, что запрос на сервер выполнился. Данный класс возвращается,
    например, методами [SendAsync](1S_SendAsync) (используется для
    асинхронной отправки документа) и
    [GetDocumentsAsync](1S_GetDocumentsAsync) (используется для
    асинхронного получения списка документов)

-   Работа с содержимым формализованных документов
    При работе с формализованными документами (счет-фактура, Торг-12,
    акт выполненных работ в формате ФНС) возникает необходимость
    формирования xml-файлов установленного формата, либо, наоборот,
    "разбора" xml-файла на составляющие для извлечения из него
    необходимой информаци.

    В компоненте реализована "объектная модель" формализованных
    документов, позволяющая работать с ними, не вдаваясь в особенности
    формирования xml-файлов. Для этого созданы классы
    [InvoiceContent](1S_InvoiceContent_Desc) (содержимое
    счета-фактуры), [Torg12SellerContent](1S_Torg12SellerContent_Desc)
    (содержимое титула продавца ТОРГ-12),
    [AcceptanceCertificateSellerContent](1S_AcceptanceCertificateSellerContent_Desc)
    (содержимое титула исполнителя акта выполненных работ).

-   Работа на сервере 1с-предприятия.
    Технология "внешней компоненты" не позволяет запускать внешнюю
    компоненту, построенную на технологии COM на сервере 1С-предприятия,
    начиная с версии платформы 1С 8.2. В текущей версии реализована
    возможность запуска компоненты как COM-объекта, без использования
    технологии внешних компонент. В этом случае возможен запуск на
    сервере 1С.

    Для запуска в этом режиме необходимо зарегистрировать в реестре
    компоненту DiadocComApi.dll, а загрузку компоненты производить
    следующим образом:

                  АПИObject = Новый ComОбъект("Diadoc.DiadocClient");
                  АПИObject.GetVersion();
                

Отличия от предыдущих версий
В интерфейс компоненты внесены следующие изменения, несовместимые с
интерфейсом предыдущих версий:

-   В
    корневом классе
    компоненты удален метод Initialize. Вместо его вызова необходимо
    устанавливать свойства объекта: ApiClientId, ServerUrl, ProxyMode и
    ProxySettings.
-   В
    корневом классе
    компоненты удален метод CreateConnection. Вместо него необходимо
    использовать методы
    CreateConnectionByCertificate
    и
    CreateConnectionByLogin
    .
-   В классе
    Organization
    удален метод GetDocuments. Вместо него необходимо использовать класс
    DocumentsTask
    , который можно получить, вызвав метод
    GetDocumentsTask
    у
    Organization
    .
-   В классе
    Organization
    удалены методы отправки документов: SendInvoice, SendXmlTorg12,
    SendNonformalizedTorg12, SendNonformalizedDocument. Вместо них
    необходимо использовать класс
    SendTask
    , который можно получить, вызвав методы
    CreateSendTask
    или
    CreateSendTaskFromFile
    у
    Organization
    .
-   В классе
    Organization
    удалено логическое свойство JoinedDiadocTreaty. Вместо него
    необходимо использовать свойство isTest, принимая внимание, что
    isTest = не JoinedDiadocTreaty.
-   Изменен способ возврата коллекций элементов. В предыдущих версиях
    компоненты возвращался массив элеметов (для 1С 8.2) либо список
    значений элементов (для 1С 7.7). В текущей версии в этом случае
    возвращается специальный класс компоненты
    Collection
    .
    Изменения затронули следующие методы:
    [GetPersonalSertificates](1S_DiadocObj_GetPersonalSertificates),
    [GetOrganizationList](1S_GetOrganizationList),
    [GetCounteragentListByStatus](1S_GetCounteragentListByStatus),
    [GetCounteragentListByInnKpp](1S_GetCounteragentListByInnKpp),
    [GetDocumentEventList](1S_GetDocumentEventList),
    [GetUsers](1S_GetUsers), а также свойства: Departments в классе
    [Organization](Организация); Subdepartments в классе
    [Department](1S_Department_Desc); InitialDocumentIds,
    SubordinateDocumentIds, Resolutions в классе
    [Document](1S_Document_Desc).

-   При работе компоненты в версии 1С 7.7 изменена интерпретация
    логического значения. В старой версии компоненты значению "истина"
    соответствовало число "-1", а значению "ложь" - число "0". В текущей
    версии компоненты значению "истина" соответствует число "1", а
    значению "истина" - число "0",

